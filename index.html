<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Game</title>
<style>
    body {
        margin: 0;
        padding: 0;
        font-family: 'Segoe UI', sans-serif;
        background: linear-gradient(to bottom, #ff9a9e, #fad0c4);
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        height: 100vh;
        overflow: hidden;
        color: #fff;
        position: relative;
    }

    h1 {
        text-align: center;
        margin-bottom: 20px;
        text-shadow: 2px 2px 10px rgba(0,0,0,0.5);
    }

    .grid {
        display: grid;
        grid-template-columns: repeat(7, 50px);
        grid-template-rows: repeat(7, 50px);
        gap: 5px;
    }

    .cell {
        width: 50px;
        height: 50px;
        background: rgba(255,255,255,0.2);
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.5rem;
        cursor: pointer;
        user-select: none;
        transition: all 0.3s ease;
    }

    .cell.found {
        background: #ff6b81;
        color: #fff;
        transform: scale(1.2);
    }

    .heart {
        position: absolute;
        font-size: 24px;
        animation: floatUp 1.5s ease-out forwards;
        pointer-events: none;
    }

    @keyframes floatUp {
        0% { opacity: 1; transform: translateY(0) scale(1); }
        100% { opacity: 0; transform: translateY(-150px) scale(1.5); }
    }

    #winMessage {
        position: fixed;              /* ‡πÅ‡∏Å‡πâ‡∏à‡∏≤‡∏Å absolute */
        top: 50%;                     /* ‡∏à‡∏≤‡∏Å 40% ‚Üí 50% */
        left: 50%;
        transform: translate(-50%, -50%);
        font-size: 2rem;
        color: #fff;
        background: rgba(255, 105, 129, 0.95);
        border-radius: 20px;
        padding: 30px 40px;
        text-align: center;
        line-height: 1.4;
        max-width: 90vw;              /* ‡∏Å‡∏±‡∏ô‡∏•‡πâ‡∏ô‡∏à‡∏≠‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠ */
        box-shadow: 0 8px 20px rgba(0,0,0,0.5);
        display: none;
        z-index: 9999;
    }
</style>
</head>
<body>
<h1>‡πÅ‡∏Å‡πâ Puzzle ‡πÅ‡∏•‡πâ‡∏ß‡∏à‡∏∞‡∏£‡∏π‡πâ‡∏ß‡πà‡∏≤‡∏ö‡∏≠‡∏Å‡∏≠‡∏∞‡πÑ‡∏£‡πÄ‡∏ò‡∏≠ ‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡∏ô‡∏µ‡πâ ‡∏°‡∏µ 4 ‡∏Ñ‡∏≥</h1>
<div class="grid" id="grid"></div>
<div id="winMessage">‡∏à‡∏∞‡∏≠‡∏¢‡∏π‡πà‡∏Ç‡πâ‡∏≤‡∏á‡πÜ‡πÄ‡∏£‡∏≤‡∏ï‡∏•‡∏≠‡∏î‡∏£‡∏∂‡∏õ‡πà‡∏≤‡∏ß‡∏Ñ‡∏£‡∏±‡∏ö</div>

<script>
const words = ["I", "LOVE", "NAMSAI", "FOREVER"];
const gridSize = 7;

// ‡∏™‡∏∏‡πà‡∏°‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£
function randomChar(){
    const chars = "ABCDEFGHIJKLMNOPQRSTUVWXYZ";
    return chars[Math.floor(Math.random()*chars.length)];
}

// ‡∏™‡∏£‡πâ‡∏≤‡∏á grid
const grid = document.getElementById('grid');
let cells = [];
for(let r=0;r<gridSize;r++){
    for(let c=0;c<gridSize;c++){
        const div = document.createElement('div');
        div.classList.add('cell');
        div.dataset.row = r;
        div.dataset.col = c;
        div.dataset.word = "";
        div.innerText = randomChar();
        grid.appendChild(div);
        cells.push(div);
    }
}

// =========================
// ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ô‡∏µ‡πâ (‡∏Ç‡∏≠‡∏á‡πÄ‡∏î‡∏¥‡∏°‡∏Ç‡∏≤‡∏î)
// ‡πÄ‡∏´‡∏ï‡∏∏‡∏ú‡∏•: ‡∏ñ‡∏π‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÅ‡∏ï‡πà‡πÑ‡∏°‡πà‡πÄ‡∏Ñ‡∏¢‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®
// =========================
function placeWord(word, wordId){
    let placed = false;

    while(!placed){
        const row = Math.floor(Math.random() * gridSize);
        const col = Math.floor(Math.random() * (gridSize - word.length));

        let canPlace = true;
        for(let i=0;i<word.length;i++){
            const cell = cells.find(c =>
                Number(c.dataset.row) === row &&
                Number(c.dataset.col) === col + i
            );
            if(cell.dataset.word){
                canPlace = false;
                break;
            }
        }

        if(canPlace){
            for(let i=0;i<word.length;i++){
                const cell = cells.find(c =>
                    Number(c.dataset.row) === row &&
                    Number(c.dataset.col) === col + i
                );
                cell.innerText = word[i];
                cell.dataset.word = wordId;
            }
            placed = true;
        }
    }
}

// ‡∏ß‡∏≤‡∏á‡∏Ñ‡∏≥‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏≥
words.forEach((w,i)=>placeWord(w, i));

// ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏ä‡∏ô‡∏∞‡∏´‡∏£‡∏∑‡∏≠‡∏¢‡∏±‡∏á
function checkWin(){
    const wordCells = cells.filter(c => c.dataset.word);
    if(wordCells.every(c => c.classList.contains('found'))){
        document.getElementById('winMessage').style.display = 'block';
        for(let i=0;i<20;i++){
            createHeart(Math.random()*window.innerWidth, Math.random()*window.innerHeight);
        }
    }
}

// ‡∏Ñ‡∏•‡∏¥‡∏Å‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£
grid.addEventListener('click', e=>{
    if(e.target.classList.contains('cell') && e.target.dataset.word){
        e.target.classList.add('found');
        createHeart(e.clientX, e.clientY);
        checkWin();
    }
});

function createHeart(x,y){
    const heart = document.createElement('div');
    heart.classList.add('heart');
    heart.innerText = 'üíñ';
    heart.style.left = (x-12)+'px';
    heart.style.top = (y-12)+'px';
    heart.style.fontSize = (Math.random()*20+20)+'px';
    document.body.appendChild(heart);
    setTimeout(()=>heart.remove(),1500);
}
</script>
</body>
</html>

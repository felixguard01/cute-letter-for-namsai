<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Game</title>
<style>
    body {
        margin: 0;
        padding: 0;
        font-family: 'Segoe UI', sans-serif;
        background: linear-gradient(to bottom, #ff9a9e, #fad0c4);
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        height: 100vh;
        overflow: hidden;
        color: #fff;
        position: relative;
    }

    h1 {
        text-align: center;
        margin-bottom: 20px;
        text-shadow: 2px 2px 10px rgba(0,0,0,0.5);
    }

    .grid {
        display: grid;
        grid-template-columns: repeat(7, 50px);
        grid-template-rows: repeat(7, 50px);
        gap: 5px;
    }

    .cell {
        width: 50px;
        height: 50px;
        background: rgba(255,255,255,0.2);
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.5rem;
        cursor: pointer;
        user-select: none;
        transition: all 0.3s ease;
    }

    .cell.found {
        background: #ff6b81;
        color: #fff;
        transform: scale(1.2);
    }

    .heart {
        position: absolute;
        font-size: 24px;
        animation: floatUp 1.5s ease-out forwards;
        pointer-events: none;
    }

    @keyframes floatUp {
        0% { opacity: 1; transform: translateY(0) scale(1); }
        100% { opacity: 0; transform: translateY(-150px) scale(1.5); }
    }

    #winMessage {
        position: absolute;
        top: 40%;
        left: 50%;
        transform: translate(-50%, -50%);
        font-size: 2rem;
        color: #fff;
        background: rgba(255, 105, 129, 0.9);
        border-radius: 20px;
        padding: 30px 50px;
        text-align: center;
        display: none;
        box-shadow: 0 8px 20px rgba(0,0,0,0.5);
    }
</style>
</head>
<body>
<h1>‡πÅ‡∏Å‡πâ Puzzle ‡πÅ‡∏•‡πâ‡∏ß‡∏à‡∏∞‡∏£‡∏π‡πâ‡∏ß‡πà‡∏≤‡∏ö‡∏≠‡∏Å‡∏≠‡∏∞‡πÑ‡∏£‡πÄ‡∏ò‡∏≠ ‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡∏ô‡∏µ‡πâ ‡∏°‡∏µ 4 ‡∏Ñ‡∏≥</h1>
<div class="grid" id="grid"></div>
<div id="winMessage">üíñ ‡∏à‡∏∞‡∏≠‡∏¢‡∏π‡πà‡∏Ç‡πâ‡∏≤‡∏á‡πÜ‡πÄ‡∏£‡∏≤‡∏ï‡∏•‡∏≠‡∏î‡∏£‡∏∂‡∏õ‡πà‡∏≤‡∏ß‡∏Ñ‡∏£‡∏±‡∏ö</div>

<script>
const words = ["I", "LOVE", "NAMSAI" , "FOREVER"];
const gridSize = 7;

// ‡∏™‡∏∏‡πà‡∏°‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£
function randomChar(){
    const chars = "ABCDEFGHIJKLMNOPQRSTUVWXYZ";
    return chars[Math.floor(Math.random()*chars.length)];
}

// ‡∏™‡∏£‡πâ‡∏≤‡∏á grid
const grid = document.getElementById('grid');
let cells = [];
for(let r=0;r<gridSize;r++){
    for(let c=0;c<gridSize;c++){
        const div = document.createElement('div');
        div.classList.add('cell');
        div.dataset.row = r;
        div.dataset.col = c;
        div.dataset.wordId = "";
        div.innerText = randomChar();
        grid.appendChild(div);
        cells.push(div);
    }
}

// ‡∏ß‡∏≤‡∏á‡∏Ñ‡∏≥‡πÅ‡∏ö‡∏ö‡πÑ‡∏°‡πà‡∏ã‡πâ‡∏≥‡∏Å‡∏±‡∏ô
function placeWord(word, wordId){
    let placed = false;
    while(!placed){
        const dir = Math.random()<0.5 ? "h" : "v";
        const start = Math.floor(Math.random()*(gridSize - (dir==="h"? word.length : 0)));
        const fixed = Math.floor(Math.random()*(gridSize - (dir==="v"? word.length : 0)));
        let conflict = false;

        // ‡∏ï‡∏£‡∏ß‡∏à cell ‡∏£‡∏≠‡∏ö ‡πÜ + ‡∏Ñ‡∏≥‡πÄ‡∏≠‡∏á
        for(let i=0;i<word.length;i++){
            let r = dir==="h" ? fixed : fixed+i;
            let c = dir==="h" ? start+i : fixed;
            
            for(let dr=-1; dr<=1; dr++){
                for(let dc=-1; dc<=1; dc++){
                    const nr = r+dr;
                    const nc = c+dc;
                    if(nr>=0 && nr<gridSize && nc>=0 && nc<gridSize){
                        const idx = nr*gridSize + nc;
                        if(cells[idx].dataset.wordId !== ""){
                            conflict = true;
                        }
                    }
                }
            }
        }

        if(!conflict){
            for(let i=0;i<word.length;i++){
                let idx = dir==="h" ? fixed*gridSize + start + i : (fixed+i)*gridSize + fixed;
                cells[idx].dataset.word = word;
                cells[idx].dataset.wordId = wordId;
                cells[idx].innerText = word[i];
            }
            placed = true;
        }
    }
}


// ‡∏ß‡∏≤‡∏á‡∏Ñ‡∏≥‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏≥
words.forEach((w,i)=>placeWord(w, i));

// ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏ä‡∏ô‡∏∞‡∏´‡∏£‡∏∑‡∏≠‡∏¢‡∏±‡∏á
function checkWin(){
    const wordCells = cells.filter(c => c.dataset.word);
    if(wordCells.every(c => c.classList.contains('found'))){
        document.getElementById('winMessage').style.display = 'block';
        // ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏´‡∏±‡∏ß‡πÉ‡∏à‡∏´‡∏•‡∏≤‡∏¢‡∏ï‡∏±‡∏ß
        for(let i=0;i<20;i++){
            createHeart(Math.random()*window.innerWidth, Math.random()*window.innerHeight);
        }
    }
}

// ‡∏Ñ‡∏•‡∏¥‡∏Å‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£
grid.addEventListener('click', e=>{
    if(e.target.classList.contains('cell') && e.target.dataset.word){
        e.target.classList.add('found');
        createHeart(e.clientX, e.clientY);
        checkWin();
    }
});

function createHeart(x,y){
    const heart = document.createElement('div');
    heart.classList.add('heart');
    heart.innerText = 'üíñ';
    heart.style.left = (x-12)+'px';
    heart.style.top = (y-12)+'px';
    heart.style.fontSize = (Math.random()*20+20)+'px';
    document.body.appendChild(heart);
    setTimeout(()=>heart.remove(),1500);
}
</script>
</body>
</html>
